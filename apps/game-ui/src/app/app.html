@if (charadesResource.isLoading() === false && sets().length > 0) {
  <div class="game-container">
    <!-- Set Selection -->
    <div class="set-selector">
      <label for="set-dropdown">Choose Set:</label>
      <select 
        id="set-dropdown"
        class="set-dropdown" 
        [value]="currentSetId()" 
        (change)="onSetChange($event)"
      >
        @for (set of sets(); track set.id) {
          <option [value]="set.id">
            {{ set.name }}
          </option>
        }
      </select>
    </div>

    <!-- Game Card -->
    <div 
      class="game-card"
      (touchstart)="onTouchStart($event)"
      (touchend)="onTouchEnd($event)"
    >
      <!-- Top Text -->
      @if (getTopText() && imageLoaded()) {
        <div class="text-area top-text">
          <span class="language-badge">{{ currentLanguage().toUpperCase() }}</span>
          <h2>{{ getTopText() }}</h2>
        </div>
      }

      <!-- Image -->
      <div class="image-area">
        @if (!imageLoaded()) {
          <div class="image-loading">
            <div class="spinner"></div>
          </div>
        }

        @if (getCurrentCharade()) {
          <img 
            [src]="getCurrentCharade()?.imageUrl"
            alt="Charade image"
            class="charade-image"
            [class.hidden]="!imageLoaded()"
            (load)="imageLoaded.set(true)"
            (error)="imageLoaded.set(true)"
          />
        }
      </div>
    </div>

    <!-- Controls -->
    <div class="controls">
      <!-- Settings Button -->
      <div class="settings-button-container">
        <button class="settings-btn" (click)="toggleSettings()" title="Settings">
          ⚙️
        </button>
      </div>

      <!-- Navigation -->
      <div class="navigation">
        <button class="nav-btn prev-btn" (click)="previousCharade()" title="Previous">
          ← Previous
        </button>

        <button class="nav-btn next-btn" (click)="nextCharade()" title="Next">
          Next →
        </button>
      </div>
    </div>
  </div>
}

<!-- Settings Component -->
<app-settings
  [isOpen]="showSettings()"
  [currentLanguage]="currentLanguage"
  [availableLanguages]="getAvailableLanguages()"
  (close)="toggleSettings()"
  (languageChange)="setLanguage($event)"
></app-settings>

<!-- Loading State -->
@if (charadesResource.isLoading() === true) {
  <div class="loading-container">
    <div class="spinner"></div>
    <p>Loading charades...</p>
  </div>
}

<!-- Error/Empty State -->
@if (charadesResource.isLoading() === false && sets().length === 0) {
  <div class="error-container">
    <div class="error-message">
      <h2>No sets found</h2>
      <p>Check the browser console for errors.</p>
    </div>
  </div>
}

<router-outlet />
